// pch.cpp: source file corresponding to the pre-compiled header

#include "pch.h"

// When you are using pre-compiled headers, this source file is necessary for compilation to succeed.

int WideCharToUtf8(LPSTR lpszUtf8, size_t buff_len, LPCWSTR lpszWideChar)
{
	int wlen = wcslen(lpszWideChar);
	int nLen = WideCharToMultiByte(CP_UTF8, 0, lpszWideChar, wlen, NULL, 0, NULL, NULL);
	if (buff_len <= (size_t)nLen)
		return -1;
	lpszUtf8[nLen] = '\0';
	return WideCharToMultiByte (CP_UTF8, 0, lpszWideChar, wlen, lpszUtf8, nLen, NULL, NULL);
}

int Utf8ToWideChar(LPWSTR lpszWideStr, size_t buff_len, LPCSTR lpszUtf8)
{
	int utf8_len = strlen(lpszUtf8);
	int nLen = MultiByteToWideChar(CP_UTF8, 0, lpszUtf8, utf8_len, NULL, NULL);
	if (buff_len <= (size_t)nLen)
		return -1;
	lpszWideStr[nLen] = '\0';
	return MultiByteToWideChar(CP_UTF8, 0, lpszUtf8, utf8_len, lpszWideStr, nLen);
}
